# Day 20 - JS-04: Unit Testing with Vitest

## ‚úÖ TL;DR

- ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Unit Test ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ **Vitest**
- ‡πÉ‡∏ä‡πâ `describe`, `it`, `expect` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î **‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö**
- ‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏ï‡∏£‡∏ß‡∏à coverage ‚â• 80%
- ‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏•‡∏î‡∏ö‡∏±‡πä‡∏Å

---

## üß† INTRO: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Unit Testing?

‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏à‡∏≠‡∏ö‡∏±‡πä‡∏Å‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡πÅ‡∏Å‡πâ  
Unit Test ‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö ‚Äú‡∏´‡∏ô‡πà‡∏ß‡∏¢‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‚Äù ‡∏Ç‡∏≠‡∏á‡πÇ‡∏Ñ‡πâ‡∏î (‡πÄ‡∏ä‡πà‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô) ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà

## ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ

- ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏ß‡πà‡∏≤ logic ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏°‡∏µ UI ‡πÑ‡∏î‡πâ
- ‡∏õ‡∏£‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏Å‡∏•‡∏±‡∏ß‡∏û‡∏±‡∏á
- ‡πÄ‡∏ó‡∏™‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÑ‡∏î‡πâ‡πÉ‡∏ô CI/CD

---

## üõ†Ô∏è INSTALL

```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡πÉ‡∏´‡∏°‡πà
mkdir day20-unit-testing-vitest && cd day20-unit-testing-vitest

# ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô npm
npm init -y

# ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô ES Module
npm pkg set type="module"

# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á Vitest
npm install -D vitest

```

---

## ‡πÄ‡∏û‡∏¥‡πà‡∏° script ‡πÉ‡∏ô package.json

```js
"scripts": {
  "test": "vitest",
  "coverage": "vitest run --coverage"
}

```

---

## üìÅ STRUCTURE

day20-unit-testing-vitest/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ math.js
‚îú‚îÄ‚îÄ test/
‚îÇ   ‚îî‚îÄ‚îÄ math.test.js
‚îú‚îÄ‚îÄ package.json

---

## ‚úçÔ∏è EXAMPLE CODE

### src/math.js

```js
export function add(a, b) {
  return a + b;
}

export function subtract(a, b) {
  return a - b;
}

```

---

### test/math.test.js

```js
import { describe, it, expect } from 'vitest';
import { add, subtract } from '../src/math.js';

describe('math.js', () => {
  it('adds numbers correctly', () => {
    expect(add(2, 3)).toBe(5);
  });

  it('subtracts numbers correctly', () => {
    expect(subtract(10, 4)).toBe(6);
  });
});

```

---

### üß™ RUN TEST

npm test

---

### ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

‚úì adds numbers correctly
‚úì subtracts numbers correctly

---

### üîç MOCK DOM / FETCH (‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô)

### ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á jsdom (‡∏ñ‡πâ‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö DOM)

npm install -D jsdom

### Mock fetch

```js
global.fetch = vi.fn(() =>
  Promise.resolve({ json: () => Promise.resolve({ name: 'Frank' }) })
);
```

### üìä CHECK COVERAGE ‚â• 80%

npm run coverage

‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á coverage provider ‚Üí Vitest ‡∏à‡∏∞‡∏ñ‡∏≤‡∏°‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á @vitest/coverage-v8 ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

File        | % Stmts | % Branch | % Funcs | % Lines
------------|---------|----------|--------|---------
math.js     | 100     | 100      | 100    | 100

üß† CONCLUSION
‡πÄ‡∏£‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏ö‡∏ö‡πÅ‡∏¢‡∏Å‡∏´‡∏ô‡πà‡∏ß‡∏¢ (Unit)

‡πÄ‡∏ó‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà return ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á

‡πÉ‡∏ä‡πâ Vitest ‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™‡πÉ‡∏ô terminal ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡πÅ‡∏°‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö ‚Üí ‡∏ä‡πà‡∏ß‡∏¢‡∏•‡∏î‡∏ö‡∏±‡πä‡∏Å ‡πÅ‡∏•‡∏∞ refactor ‡πÑ‡∏î‡πâ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à
